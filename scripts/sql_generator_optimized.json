{
  "generate": {
    "traces": [],
    "train": [],
    "demos": [
      {
        "question": "Using the AOV definition from the KPI docs, what was the Average Order Value during 'Winter Classics 1997'?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT CAST(SUM(T2.UnitPrice * T2.Quantity * (1 - T2.Discount)) / COUNT(DISTINCT T1.OrderID) AS REAL) FROM Orders AS T1 INNER JOIN 'Order Details' AS T2 ON T1.OrderID = T2.OrderID WHERE T1.OrderDate BETWEEN '1997-12-01' AND '1997-12-31';"
      },
      {
        "question": "Per the KPI definition of gross margin, who was the top customer by gross margin in 1997? Assume CostOfGoods is approximated by 70% of UnitPrice if not available.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT T3.CompanyName, SUM(T2.Quantity * (T2.UnitPrice * 0.3) * (1 - T2.Discount)) AS GrossMargin FROM Orders AS T1 INNER JOIN 'Order Details' AS T2 ON T1.OrderID = T2.OrderID INNER JOIN Customers AS T3 ON T1.CustomerID = T3.CustomerID WHERE STRFTIME('%Y', T1.OrderDate) = '1997' GROUP BY T3.CompanyName ORDER BY GrossMargin DESC LIMIT 1;"
      },
      {
        "question": "Total revenue from the 'Beverages' category during 'Summer Beverages 1997' dates.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT SUM(T2.UnitPrice * T2.Quantity * (1 - T2.Discount)) FROM Orders AS T1 INNER JOIN 'Order Details' AS T2 ON T1.OrderID = T2.OrderID INNER JOIN Products AS T3 ON T2.ProductID = T3.ProductID INNER JOIN Categories AS T4 ON T3.CategoryID = T4.CategoryID WHERE T1.OrderDate BETWEEN '1997-06-01' AND '1997-06-30' AND T4.CategoryName = 'Beverages';"
      },
      {
        "question": "What are the top 5 customers by number of orders?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT T2.CompanyName, COUNT(T1.OrderID) AS OrderCount FROM Orders AS T1 JOIN Customers AS T2 ON T1.CustomerID = T2.CustomerID GROUP BY T2.CompanyName ORDER BY OrderCount DESC LIMIT 5;"
      },
      {
        "question": "List the names of all employees who report to 'Andrew Fuller'.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT T1.FirstName, T1.LastName FROM Employees AS T1 JOIN Employees AS T2 ON T1.ReportsTo = T2.EmployeeID WHERE T2.FirstName = 'Andrew' AND T2.LastName = 'Fuller';"
      },
      {
        "question": "How many products are in the 'Condiments' category?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT COUNT(*) FROM Products AS T1 JOIN Categories AS T2 ON T1.CategoryID = T2.CategoryID WHERE T2.CategoryName = 'Condiments';"
      },
      {
        "question": "Total revenue from the 'Beverages' category during 'Summer Beverages 1997' dates.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT SUM(T2.UnitPrice * T2.Quantity * (1 - T2.Discount)) FROM Orders AS T1 INNER JOIN 'Order Details' AS T2 ON T1.OrderID = T2.OrderID INNER JOIN Products AS T3 ON T2.ProductID = T3.ProductID INNER JOIN Categories AS T4 ON T3.CategoryID = T4.CategoryID WHERE T1.OrderDate BETWEEN '1997-06-01' AND '1997-06-30' AND T4.CategoryName = 'Beverages';"
      },
      {
        "question": "What is the total quantity of 'Chai' sold in 1997?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT SUM(T1.Quantity) FROM \"Order Details\" AS T1 JOIN Products AS T2 ON T1.ProductID = T2.ProductID JOIN Orders AS T3 ON T1.OrderID = T3.OrderID WHERE T2.ProductName = 'Chai' AND STRFTIME('%Y', T3.OrderDate) = '1997';"
      },
      {
        "question": "What is the average unit price of products in the 'Seafood' category?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT AVG(T1.UnitPrice) FROM Products AS T1 JOIN Categories AS T2 ON T1.CategoryID = T2.CategoryID WHERE T2.CategoryName = 'Seafood';"
      },
      {
        "question": "During 'Summer Beverages 1997' as defined in the marketing calendar, which product category had the highest total quantity sold?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT T3.CategoryName, SUM(T2.Quantity) AS TotalQuantity FROM Orders AS T1 INNER JOIN 'Order Details' AS T2 ON T1.OrderID = T2.OrderID INNER JOIN Products AS T3 ON T2.ProductID = T3.ProductID INNER JOIN Categories AS T4 ON T3.CategoryID = T4.CategoryID WHERE T1.OrderDate BETWEEN '1997-06-01' AND '1997-06-30' GROUP BY T3.CategoryName ORDER BY TotalQuantity DESC LIMIT 1;"
      },
      {
        "question": "Top 3 products by total revenue all-time.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT T2.ProductName, SUM(T1.UnitPrice * T1.Quantity * (1 - T1.Discount)) AS TotalRevenue FROM 'Order Details' AS T1 INNER JOIN Products AS T2 ON T1.ProductID = T2.ProductID GROUP BY T2.ProductName ORDER BY TotalRevenue DESC LIMIT 3;"
      },
      {
        "question": "Top 3 products by total revenue all-time.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT T2.ProductName, SUM(T1.UnitPrice * T1.Quantity * (1 - T1.Discount)) AS TotalRevenue FROM 'Order Details' AS T1 INNER JOIN Products AS T2 ON T1.ProductID = T2.ProductID GROUP BY T2.ProductName ORDER BY TotalRevenue DESC LIMIT 3;"
      },
      {
        "question": "Which supplier provides the most products?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "query": "SELECT T2.CompanyName, COUNT(T1.ProductID) AS ProductCount FROM Products AS T1 JOIN Suppliers AS T2 ON T1.SupplierID = T2.SupplierID GROUP BY T2.CompanyName ORDER BY ProductCount DESC LIMIT 1;"
      }
    ],
    "signature": {
      "instructions": "Generate a valid SQLite query to answer the question.\n\nCRITICAL INSTRUCTIONS:\n1. Output ONLY the raw SQL query. Do NOT use markdown code blocks (```sql). Do NOT add explanations.\n2. Start the query immediately with 'SELECT'.\n3. Use the provided schema.\n4. Use double quotes \"Table Name\" for tables/columns with spaces.\n5. For dates, use SQLite's STRFTIME format.",
      "fields": [
        {
          "prefix": "Question:",
          "description": "The question to be answered via SQL."
        },
        {
          "prefix": "Schema:",
          "description": "The SQLite database schema."
        },
        {
          "prefix": "Feedback:",
          "description": "Error message from previous SQL execution attempt."
        },
        {
          "prefix": "Sql Query:",
          "description": "The raw SQL query string. Nothing else."
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.11",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
