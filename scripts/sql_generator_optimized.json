{
  "generate": {
    "traces": [],
    "train": [],
    "demos": [
      {
        "augmented": true,
        "question": "Top 3 products by total revenue all-time.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT \"P\".ProductName, SUM(\"O\".\"UnitPrice\" * \"O\".\"Quantity\" * (1 - \"O\".\"Discount\")) AS Revenue\nFROM \"Order Details\" O\nJOIN Products P ON O.ProductID = P.ProductID\nGROUP BY \"P\".ProductID\nORDER BY Revenue DESC\nLIMIT 3;"
      },
      {
        "augmented": true,
        "question": "Top 3 products by total revenue all-time.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT \"P\".ProductName, SUM(\"O\".\"UnitPrice\" * \"O\".\"Quantity\" * (1 - \"O\".\"Discount\")) AS Revenue\nFROM \"Order Details\" O\nJOIN Products P ON O.ProductID = P.ProductID\nGROUP BY \"P\".ProductID\nORDER BY Revenue DESC\nLIMIT 3;"
      },
      {
        "augmented": true,
        "question": "How many products are in the 'Condiments' category?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT COUNT(DISTINCT ProductID)\nFROM Products\nJOIN Categories ON Products.CategoryID = Categories.CategoryID\nWHERE Categories.CategoryName = 'Condiments'"
      },
      {
        "augmented": true,
        "question": "Which supplier provides the most products?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT S.CompanyName, COUNT(P.ProductID) as ProductCount\nFROM Products P\nJOIN Suppliers S ON P.SupplierID = S.SupplierID\nGROUP BY S.SupplierID\nORDER BY ProductCount DESC\nLIMIT 1"
      },
      {
        "augmented": true,
        "question": "What are the top 5 customers by number of orders?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT Customers.CustomerID, COUNT(Orders.OrderID) AS NumOfOrders FROM Orders INNER JOIN Customers ON Customers.CustomerID = Orders.CustomerID GROUP BY Customers.CustomerID ORDER BY NumOfOrders DESC LIMIT 5"
      },
      {
        "augmented": true,
        "question": "What is the average unit price of products in the 'Seafood' category?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT AVG(UnitPrice) FROM Products P JOIN Categories C ON P.CategoryID = C.CategoryID WHERE CategoryName = 'Seafood';"
      },
      {
        "augmented": true,
        "question": "List all orders that have not been shipped yet.",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT \"OrderID\", \"CustomerID\", \"EmployeeID\", \"OrderDate\", \"RequiredDate\", \"ShippedDate\", \"ShipVia\", \"Freight\", \"ShipName\", \"ShipAddress\", \"ShipCity\", \"ShipRegion\", \"ShipPostalCode\", \"ShipCountry\"\nFROM Orders\nWHERE ShippedDate IS NULL;"
      },
      {
        "augmented": true,
        "question": "What is the total freight cost for orders shipped to Germany in 2016?",
        "schema": "CREATE TABLE Categories\n(      CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,\n       CategoryName TEXT,\n       Description TEXT,\n       Picture BLOB\n)\n\nCREATE TABLE Customers\n(      CustomerID TEXT,\n       CompanyName TEXT,\n       ContactName TEXT,\n       ContactTitle TEXT,\n       Address TEXT,\n       City TEXT,\n       Region TEXT,\n       PostalCode TEXT,\n       Country TEXT,\n       Phone TEXT,\n       Fax TEXT,\n       PRIMARY KEY (`CustomerID`)\n)\n\nCREATE TABLE Order Details(\n   OrderIDINTEGER NOT NULL,\n   ProductIDINTEGER NOT NULL,\n   UnitPriceNUMERIC NOT NULL DEFAULT 0,\n   QuantityINTEGER NOT NULL DEFAULT 1,\n   DiscountREAL NOT NULL DEFAULT 0,\n    PRIMARY KEY (\"OrderID\",\"ProductID\"),\n    CHECK (Discount>=(0) AND Discount<=(1)),\n    CHECK (Quantity>(0)),\n    CHECK (UnitPrice>=(0)),\n\tFOREIGN KEY (OrderID) REFERENCES Orders (OrderID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ProductID) REFERENCES Products (ProductID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Orders(\n   OrderIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CustomerIDTEXT,\n   EmployeeIDINTEGER,\n   OrderDateDATETIME,\n   RequiredDateDATETIME,\n   ShippedDateDATETIME,\n   ShipViaINTEGER,\n   FreightNUMERIC DEFAULT 0,\n   ShipNameTEXT,\n   ShipAddressTEXT,\n   ShipCityTEXT,\n   ShipRegionTEXT,\n   ShipPostalCodeTEXT,\n   ShipCountryTEXT,\n   FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Products(\n   ProductIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   ProductNameTEXT NOT NULL,\n   SupplierIDINTEGER,\n   CategoryIDINTEGER,\n   QuantityPerUnitTEXT,\n   UnitPriceNUMERIC DEFAULT 0,\n   UnitsInStockINTEGER DEFAULT 0,\n   UnitsOnOrderINTEGER DEFAULT 0,\n   ReorderLevelINTEGER DEFAULT 0,\n   DiscontinuedTEXT NOT NULL DEFAULT '0',\n    CHECK (UnitPrice>=(0)),\n    CHECK (ReorderLevel>=(0)),\n    CHECK (UnitsInStock>=(0)),\n    CHECK (UnitsOnOrder>=(0)),\n\tFOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION,\n\tFOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID) \n\t\tON DELETE NO ACTION ON UPDATE NO ACTION\n)\n\nCREATE TABLE Suppliers(\n   SupplierIDINTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n   CompanyNameTEXT NOT NULL,\n   ContactNameTEXT,\n   ContactTitleTEXT,\n   AddressTEXT,\n   CityTEXT,\n   RegionTEXT,\n   PostalCodeTEXT,\n   CountryTEXT,\n   PhoneTEXT,\n   FaxTEXT,\n   HomePageTEXT\n)",
        "feedback": null,
        "response_format": {
          "type": "text"
        },
        "sql_query": "SELECT SUM(Freight) FROM Orders WHERE ShipCountry = 'Germany' AND STRFTIME('%Y', OrderDate) = '2016';"
      }
    ],
    "signature": {
      "instructions": "Generate a valid SQLite query to answer the question.\n\nCRITICAL INSTRUCTIONS:\n1. Output ONLY the raw SQL query. Do NOT use markdown code blocks (```sql). Do NOT add explanations.\n2. Start the query immediately with 'SELECT'.\n3. Use the provided schema.\n4. Use double quotes \"Table Name\" for tables/columns with spaces.\n5. For dates, use SQLite's STRFTIME format.\n6. BUSINESS RULE: If 'CostOfGoods' is requested but not in schema, use (0.7 * UnitPrice).\n7. STRICTLY FORBIDDEN: Do NOT use 'or' as an alias for Orders. Use 'O' or 'T1'.\n\n8. PATTERN RECOGNITION - Match query to question type:\n   - If question asks for \"average\" or \"AOV\", use AVG() or SUM(...)/COUNT(DISTINCT OrderID)\n   - If question asks for \"top customer\" or \"customer by X\", GROUP BY customer (Customers table)\n   - If question asks for \"top category\" or \"category with X\", GROUP BY category (Categories table)\n   - If question asks for \"top products\", GROUP BY product (Products table)\n   - If question asks for \"gross margin\" or \"margin\", calculate: Revenue - Cost (not just revenue)\n   - DO NOT default to \"top 3 products by revenue\" for unrelated questions\n\n9. FORMULA VALIDATION:\n   - Revenue formula: SUM(UnitPrice * Quantity * (1 - Discount))\n   - NEVER use: SUM(UnitPrice * Discount) or SUM(Discount * Quantity)\n   - Gross margin: SUM(Revenue - Cost) where Cost = 0.7 * UnitPrice if not available",
      "fields": [
        {
          "prefix": "Question:",
          "description": "The question to be answered via SQL."
        },
        {
          "prefix": "Schema:",
          "description": "The SQLite database schema."
        },
        {
          "prefix": "Feedback:",
          "description": "Error message from previous SQL execution attempt."
        },
        {
          "prefix": "Sql Query:",
          "description": "The raw SQL query string. Nothing else."
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.11",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
